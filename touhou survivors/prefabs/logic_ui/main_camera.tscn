[gd_scene load_steps=35 format=3 uid="uid://cfflhyetxhgwh"]

[ext_resource type="Script" path="res://scripts/logic_ui/camera_main.gd" id="1_365xw"]
[ext_resource type="PackedScene" uid="uid://iqvjyq5tkfb0" path="res://prefabs/logic_ui/weapon_spawner.tscn" id="2_8kxfo"]
[ext_resource type="Texture2D" uid="uid://ciojqae21qxjp" path="res://sprites/ui/screen_dim.png" id="2_bpj4s"]
[ext_resource type="Texture2D" uid="uid://cfbld0no123ax" path="res://sprites/ui/powerbar_border.png" id="2_vlpjd"]
[ext_resource type="PackedScene" uid="uid://04yuy6nwpd5q" path="res://prefabs/logic_ui/tooltip.tscn" id="5_fucjo"]
[ext_resource type="PackedScene" uid="uid://cbjpy4ciqe0t1" path="res://prefabs/logic_ui/Inventory.tscn" id="5_yatjy"]
[ext_resource type="PackedScene" uid="uid://6dwuqj2vu1k8" path="res://prefabs/logic_ui/shop.tscn" id="6_bsv6g"]
[ext_resource type="Texture2D" uid="uid://ptcu0hj15c6b" path="res://sprites/ui/resume.png" id="8_lv6fl"]
[ext_resource type="Texture2D" uid="uid://bjuq7vtc66ft3" path="res://sprites/ui/vignette.png" id="8_yx7o0"]
[ext_resource type="Texture2D" uid="uid://5xfk8cnv31f3" path="res://sprites/ui/reimu_portrait_anims.png" id="10_ras5u"]
[ext_resource type="FontFile" uid="uid://4g0oq0v08h0h" path="res://resources/fonts/prstart.ttf" id="11_6mxui"]
[ext_resource type="PackedScene" uid="uid://63murqtbvxlb" path="res://prefabs/logic_ui/occult_orb.tscn" id="11_rmstm"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_nsojg"]
bg_color = Color(0.180392, 0.133333, 0.184314, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_mx0fe"]
bg_color = Color(0.137255, 0.564706, 0.388235, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_iij6q"]
bg_color = Color(0, 0, 0, 0.545098)

[sub_resource type="AtlasTexture" id="AtlasTexture_otkh7"]
atlas = ExtResource("10_ras5u")
region = Rect2(0, 81, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_cas70"]
atlas = ExtResource("10_ras5u")
region = Rect2(26, 81, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_5vld5"]
atlas = ExtResource("10_ras5u")
region = Rect2(52, 81, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_507cw"]
atlas = ExtResource("10_ras5u")
region = Rect2(78, 81, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_be0he"]
atlas = ExtResource("10_ras5u")
region = Rect2(0, 27, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_agp7r"]
atlas = ExtResource("10_ras5u")
region = Rect2(26, 27, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_0dw2k"]
atlas = ExtResource("10_ras5u")
region = Rect2(52, 27, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_fmgsw"]
atlas = ExtResource("10_ras5u")
region = Rect2(78, 27, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_taett"]
atlas = ExtResource("10_ras5u")
region = Rect2(0, 0, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_bopx3"]
atlas = ExtResource("10_ras5u")
region = Rect2(26, 0, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_6qod7"]
atlas = ExtResource("10_ras5u")
region = Rect2(52, 0, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_punb6"]
atlas = ExtResource("10_ras5u")
region = Rect2(78, 0, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_jel5d"]
atlas = ExtResource("10_ras5u")
region = Rect2(0, 54, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_cdbrj"]
atlas = ExtResource("10_ras5u")
region = Rect2(26, 54, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_4ho5p"]
atlas = ExtResource("10_ras5u")
region = Rect2(52, 54, 26, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_7oowk"]
atlas = ExtResource("10_ras5u")
region = Rect2(78, 54, 26, 27)

[sub_resource type="SpriteFrames" id="SpriteFrames_wande"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_otkh7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cas70")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5vld5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_507cw")
}],
"loop": true,
"name": &"blink",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_be0he")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_agp7r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0dw2k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fmgsw")
}],
"loop": true,
"name": &"damage",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_taett")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bopx3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6qod7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_punb6")
}],
"loop": true,
"name": &"head_bob",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jel5d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cdbrj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4ho5p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7oowk")
}],
"loop": true,
"name": &"smile",
"speed": 8.0
}]

[sub_resource type="Animation" id="Animation_vwkfc"]
resource_name = "screen_dim"
length = 0.3
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ScreenDim:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2dbxq"]
_data = {
"screen_dim": SubResource("Animation_vwkfc")
}

[node name="MainCamera" type="Camera2D"]
z_index = 5
texture_filter = 1
current = true
script = ExtResource("1_365xw")

[node name="ScreenDim" type="Sprite2D" parent="."]
visible = false
modulate = Color(1, 1, 1, 0)
z_index = -1
texture = ExtResource("2_bpj4s")

[node name="Powerbar" type="ProgressBar" parent="."]
offset_left = -211.0
offset_top = -119.0
offset_right = 212.0
offset_bottom = -105.0
theme_override_styles/background = SubResource("StyleBoxFlat_nsojg")
theme_override_styles/fill = SubResource("StyleBoxFlat_mx0fe")
show_percentage = false

[node name="PowerbarBorder" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(0, -112)
texture = ExtResource("2_vlpjd")

[node name="Tooltip" parent="." instance=ExtResource("5_fucjo")]
visible = false

[node name="PlayerInventory" type="Node2D" parent="."]

[node name="Inventory" parent="." instance=ExtResource("5_yatjy")]
visible = false
position = Vector2(88, 2)

[node name="Shop" parent="." instance=ExtResource("6_bsv6g")]
visible = false
position = Vector2(-100, 0)

[node name="WeaponSpawner" parent="." instance=ExtResource("2_8kxfo")]
position = Vector2(-178, -95)

[node name="shop_close_button" type="Node2D" parent="."]
visible = false

[node name="Button" type="Button" parent="shop_close_button"]
offset_left = -214.0
offset_top = 44.0
offset_right = -190.75
offset_bottom = 121.0
theme_override_styles/normal = SubResource("StyleBoxFlat_iij6q")

[node name="resume" type="Sprite2D" parent="shop_close_button"]
position = Vector2(-202, 82)
scale = Vector2(0.5, 0.5)
texture = ExtResource("8_lv6fl")

[node name="Vignette" type="Sprite2D" parent="."]
texture = ExtResource("8_yx7o0")

[node name="ReimuPortrait" type="AnimatedSprite2D" parent="."]
z_index = 10
position = Vector2(-200, -88)
frames = SubResource("SpriteFrames_wande")
animation = &"blink"

[node name="Level" type="Label" parent="."]
offset_left = -212.0
offset_top = -73.0
offset_right = -187.0
offset_bottom = -64.0
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 3
theme_override_fonts/font = ExtResource("11_6mxui")
theme_override_font_sizes/font_size = 4
text = "LVL 1"

[node name="Time" type="Label" parent="."]
offset_left = -212.0
offset_top = -66.0
offset_right = -187.0
offset_bottom = -57.0
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 3
theme_override_fonts/font = ExtResource("11_6mxui")
theme_override_font_sizes/font_size = 4
text = "0:00"

[node name="OccultOrbParent" type="Node2D" parent="."]

[node name="occult_orb" parent="OccultOrbParent" instance=ExtResource("11_rmstm")]
position = Vector2(203, 111)

[node name="occult_orb2" parent="OccultOrbParent" instance=ExtResource("11_rmstm")]
position = Vector2(193, 111)

[node name="occult_orb3" parent="OccultOrbParent" instance=ExtResource("11_rmstm")]
position = Vector2(183, 111)

[node name="occult_orb4" parent="OccultOrbParent" instance=ExtResource("11_rmstm")]
position = Vector2(173, 111)

[node name="occult_orb5" parent="OccultOrbParent" instance=ExtResource("11_rmstm")]
position = Vector2(163, 111)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_2dbxq")
}

[node name="PortraitAnims" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[node name="Threat" type="Timer" parent="."]
wait_time = 60.0
autostart = true

[connection signal="button_down" from="shop_close_button/Button" to="." method="_on_button_button_down"]
[connection signal="animation_finished" from="ReimuPortrait" to="." method="_on_reimu_portrait_animation_finished"]
[connection signal="timeout" from="PortraitAnims" to="." method="_on_portrait_anims_timeout"]
[connection signal="timeout" from="Threat" to="." method="_on_threat_timeout"]
